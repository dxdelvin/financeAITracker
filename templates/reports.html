{% extends "base.html" %}

{% block main_content %}

<!-- Main Navigation (Same as home.html) -->
<nav class="nav-header">
    <h1>AI MoneyMonitor</h1>
    <div class="nav-links">
        <a href="/">Home</a>
        <a href="/">History</a>
        <a href="/reports">Reports</a>
    </div>
</nav>
<div id="chart-data"
     data-categories="{{ categories|escapejs }}"
     data-category-amounts="{{ category_amounts|escapejs }}"
     data-months="{{ months|escapejs }}"
     data-monthly-income="{{ monthly_income|escapejs }}"
     data-monthly-expenses="{{ monthly_expenses|escapejs }}"
     data-total-income="{{ total_income }}"
     data-total-expenses="{{ total_expenses }}">
</div>


<div class="reports-container">

    <!-- Date Filter Section -->
    <div class="date-filters">
        <button class="filter-btn active" data-days="7">Last 7 Days</button>
        <button class="filter-btn" data-days="30">Last 30 Days</button>
        <button class="filter-btn" data-days="365">Last Year</button>
        <button class="filter-btn" data-days="thismonth">This Month</button>
        <button class="filter-btn" data-days="thisyear">This Year</button>

        <div class="custom-date-filter">
            <input type="date" id="startDate">
            <span>to</span>
            <input type="date" id="endDate">
            <button id="applyCustom">Apply</button>
        </div>
    </div>

    <!-- Summary Cards -->
    <div class="dashboard-summary">
        <div class="summary-card">
            <h3>Total Income</h3>
            <h2>${{ total_income|floatformat:2 }}</h2>
        </div>
        <div class="summary-card">
            <h3>Total Expenses</h3>
            <h2>${{ total_expenses|floatformat:2 }}</h2>
        </div>
        <div class="summary-card">
            <h3>Net Balance</h3>
            <h2>${{ net_balance|floatformat:2 }}</h2>
        </div>
    </div>

    <!-- Charts Grid -->
    <div class="charts-grid">
        <!-- Income vs Expenses Chart -->
        <div class="chart-card">
            <h3>Income vs Expenses</h3>
            <div class="chart-container">
                <canvas id="incomeExpenseChart"></canvas>
            </div>
        </div>

        <!-- Category Breakdown -->
        <div class="chart-card">
            <h3>Category Breakdown</h3>
            <div class="chart-container">
                <canvas id="categoryChart"></canvas>
            </div>
        </div>

        <!-- Monthly Trend -->
        <div class="chart-card">
            <h3>Monthly Trend</h3>
            <div class="chart-container">
                <canvas id="trendChart"></canvas>
            </div>
        </div>

        <!-- Transaction Type Distribution -->
        <div class="chart-card">
            <h3>Transaction Types</h3>
            <div class="chart-container">
                <canvas id="typeChart"></canvas>
            </div>
        </div>
    </div>
</div>




{% endblock %}
